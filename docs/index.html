<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Paper Timetable Generator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Special+Elite&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" href="./icons/favicon.ico" sizes="any" />
    <link rel="icon" href="./icons/timetable.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="./icons/favicon-180x180.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="./icons/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="./icons/favicon-16x16.png" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="page">
      <header class="hero panel-narrow">
        <h1>Paper Timetable Generator</h1>
        <p>
          Donâ€™t trust journey planners to show every available connection?<br>
          Is piecing together multiple outdated paper timetables a pain?<br>
          Want to quickly see all possible options during disruptions?
        </p>
        <p>
          <strong>Paper Timetable Generator</strong> provides the complete overview
          of a traditional paper timetable, combined with the customisation and real-time data of
          modern journey planners.
        </p>
        <p>
          Create clean, printable timetables for services along a custom route for a given
          date and time window. All services running on the route are laid out in clear, easy-to-read
          tables for each direction. View them on the web (use <em>Share Link</em> to return to the
          same timetable later), or download a PDF for offline use and printing.
        </p>
        <p>
          Enable <strong>Realtime</strong> to see actual and predicted running times using live data from the
          Realtime Trains API. Realtime information is not included in the PDF download.
        </p>
        <p>
          Use <strong>via stations</strong> to create a longer route which has no direct end-to-end services.
          Stations are only included in the timetable if they are called at by direct services between
          the selected input stations. Stations must be on a route going past a <em>mandatory via 
          station</em>, but may be on a route which bypasses an <em>optional via station</em>.
        </p>
      </header>

      <main>
        <section class="panel panel-narrow">
          <h2>Create Your Timetable</h2>
          <form id="form">
            <div class="form-row form-row-stations">
              <label class="station-field">
                <span>From</span>
                <input
                  type="text"
                  id="fromStation"
                  class="station-input"
                  autocomplete="off"
                  required
                />
                <input type="hidden" id="fromCrs" />
                <div class="station-suggest" id="fromSuggest" role="listbox"></div>
              </label>
              <div class="via-group">
                <span class="via-group-label">Via (Mandatory Selected)</span>
                <div class="via-scroll" id="viaScroll">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    id="addViaBtn"
                  >
                    Add Via
                  </button>
                </div>
              </div>
              <label class="station-field">
                <span>To</span>
                <input
                  type="text"
                  id="toStation"
                  class="station-input"
                  autocomplete="off"
                  required
                />
                <input type="hidden" id="toCrs" />
                <div class="station-suggest" id="toSuggest" role="listbox"></div>
              </label>
            </div>

            <div class="form-row form-row-meta">
              <label>
                Date
                <input type="date" id="serviceDate" required />
              </label>
              <label>
                Start Time
                <input type="time" id="startTime" required />
              </label>
              <div class="time-now-group">
                <label>
                  End Time
                  <input type="time" id="endTime" required />
                </label>
                <button type="button" class="btn btn-secondary btn-now" id="nowBtn">
                  Set To Now
                </button>
              </div>
            </div>
          </form>

            <div class="actions">
            <div class="action-buttons">
              <button
                type="submit"
                class="btn btn-primary"
                id="buildBtn"
                form="form"
              >
                Build Timetable
              </button>
              <button
                type="button"
                class="btn btn-primary"
                id="downloadPdfBtn"
                disabled
              >
                Download PDF
              </button>
              <button
                type="button"
                class="btn btn-primary"
                id="shareBtn"
                disabled
              >
                Share Link
              </button>
              <button
                type="button"
                class="btn btn-secondary btn-toggle"
                id="realtimeBtn"
                aria-pressed="false"
                disabled
              >
                Realtime
              </button>
              <button
                type="button"
                class="btn btn-secondary btn-toggle"
                id="platformBtn"
                aria-pressed="false"
                disabled
              >
                Show Platforms
              </button>
            </div>
            <div id="status" hidden>
              <span class="status-bar" aria-hidden="true"></span>
              <span class="status-text" id="statusText"></span>
            </div>
          </div>
        </section>

        <section class="results">
          <div class="table-card" id="table-card-ab">
            <h2 id="headingAB"></h2>
            <div class="table-key is-empty" id="key-ab" aria-live="polite"></div>
            <div class="table-scroll">
              <table>
                <thead>
                  <tr id="header-row-ab"></tr>
                  <tr id="header-icons-row-ab"></tr>
                </thead>
                <tbody id="body-rows-ab"></tbody>
              </table>
            </div>
            <div
              class="table-key table-key--crs is-empty"
              id="crs-key-ab"
              aria-live="polite"
            ></div>
          </div>

          <div class="table-card" id="table-card-ba">
            <h2 id="headingBA"></h2>
            <div class="table-key is-empty" id="key-ba" aria-live="polite"></div>
            <div class="table-scroll">
              <table>
                <thead>
                  <tr id="header-row-ba"></tr>
                  <tr id="header-icons-row-ba"></tr>
                </thead>
                <tbody id="body-rows-ba"></tbody>
              </table>
            </div>
            <div
              class="table-key table-key--crs is-empty"
              id="crs-key-ba"
              aria-live="polite"
            ></div>
          </div>
        </section>
      </main>
    </div>

    <div class="rotate-modal" id="rotateModal" hidden>
      <div class="rotate-modal__backdrop" aria-hidden="true"></div>
      <div
        class="rotate-modal__panel"
        role="dialog"
        aria-modal="true"
        aria-labelledby="rotateModalTitle"
      >
        <h2 id="rotateModalTitle">Rotate your phone</h2>
        <p>Switch to landscape for the best timetable view.</p>
        <div class="rotate-modal__icon" aria-hidden="true">
          <svg
            class="rotate-modal__spin"
            viewBox="0 0 200 200"
            role="img"
            aria-label="Rotate device"
          >
            <defs>
              <marker
                id="rotateArrow"
                markerWidth="4"
                markerHeight="4"
                refX="3"
                refY="2"
                orient="auto"
              >
                <path d="M0,0 L4,2 L0,4 Z" fill="currentColor" />
              </marker>
            </defs>
            <path
              d="M142.4 57.6 A60 60 0 0 1 142.4 142.4"
              fill="none"
              stroke="currentColor"
              stroke-width="6"
              marker-end="url(#rotateArrow)"
            />
            <path
              d="M57.6 142.4 A60 60 0 0 1 57.6 57.6"
              fill="none"
              stroke="currentColor"
              stroke-width="6"
              marker-end="url(#rotateArrow)"
            />
            <rect
              x="70"
              y="40"
              width="60"
              height="120"
              rx="10"
              ry="10"
              fill="none"
              stroke="currentColor"
              stroke-width="6"
            />
            <circle cx="100" cy="140" r="4" fill="currentColor" />
          </svg>
        </div>
        <button class="btn btn-primary" type="button" id="rotateModalOk">
          OK
        </button>
      </div>
    </div>

    <script src="./config.js"></script>
    <script src="./js/timetable-utils.js"></script>
    <script src="./js/timetable-sort.js"></script>
    <script src="./js/timetable-model.js"></script>
    <script src="./js/timetable-render.js"></script>
    <script src="./app.js"></script>
  </body>
</html>
