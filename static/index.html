<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Paper Timetable Generator</title>
    <style>
      body {
        font-family: system-ui, sans-serif;
        margin: 2rem;
        line-height: 1.4;
      }
      h1 {
        font-size: 1.6rem;
        margin-bottom: 0.25rem;
      }
      h2 {
        margin-top: 1.5rem;
      }
      label {
        display: inline-block;
        margin-right: 1rem;
        margin-top: 0.5rem;
      }
      input {
        padding: 0.25rem 0.4rem;
        font-size: 1rem;
        margin-left: 0.25rem;
      }
      input[type="text"] {
        width: 4rem;
        text-transform: uppercase;
      }
      input[type="date"] {
        width: 11rem;
      }
      input[type="time"] {
        width: 7rem;
      }
      button {
        margin-top: 0.75rem;
        padding: 0.4rem 0.8rem;
        font-size: 1rem;
        cursor: pointer;
      }
      #status {
        margin-top: 1rem;
        font-family: monospace;
        white-space: pre-wrap;
      }
      table {
        border-collapse: collapse;
        width: 100%;
        min-width: 40rem;
        font-size: 0.85rem;
        margin-bottom: 2rem;
      }
      th {
        border: 1px solid #ccc;
        padding: 0.25rem 0.4rem;
        text-align: center;
      }

      td {
        /* keep vertical gridlines */
        border-left: 1px solid #ccc;
        border-right: 1px solid #ccc;

        /* remove horizontal gridlines by default */
        border-top: none;
        border-bottom: none;

        padding: 0.25rem 0.4rem;
        text-align: center;
      }

      /* Add a horizontal line above rows that should have one:
       - below the header (first body row)
       - between arr and dep rows of the same station (dep row gets a top border)
    */
      tr.row-sep-top > td {
        border-top: 1px solid #ccc;
      }
      th.sticky-top {
        position: sticky;
        top: 0;
        background: #f0f0f0;
        z-index: 2;
      }
      th.sticky-left,
      td.sticky-left {
        position: sticky;
        left: 0;
        background: #f9f9f9;
        text-align: right;
        z-index: 3;
      }
      td.sticky-left.station-row-label {
        white-space: nowrap;
        width: max-content;
        min-width: max-content;
        text-align: right;
        padding-right: 0.5rem;
      }
      th.corner {
        z-index: 4;
      }
      .station-row-label {
        font-weight: 600;
      }
      .small {
        font-size: 0.9rem;
        color: #555;
        margin-top: 0.5rem;
        max-width: 60rem;
      }
      .time-empty {
        color: #ccc;
      }
      .service-header {
        font-weight: 600;
        white-space: nowrap;
        color: inherit;
        text-decoration: none;
      }
      .service-header:hover {
        text-decoration: underline;
      }

      /* --- icon header row --- */
      th.icon-row {
        font-weight: 600;
        padding: 0.15rem 0.4rem;
      }

      .icon-wrap {
        display: inline-flex;
        gap: 0.35rem;
        align-items: center;
        justify-content: center;
      }

      .fc-icon {
        display: inline-flex;
        width: 1.2rem;
        height: 1.2rem;
        border: 1px solid #666;
        border-radius: 999px;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        line-height: 1;
      }

      .bed-icon {
        display: inline-flex;
        width: 1.2rem;
        height: 1.2rem;
        align-items: center;
        justify-content: center;
      }

      .bed-icon svg {
        width: 1.1rem;
        height: 1.1rem;
        display: block;
      }
    </style>
  </head>
  <body>
    <h1>Paper Timetable Generator</h1>
    <p class="small">
      Create clean, printable timetable tables for train services between the
      stations you choose, filtered to your selected date and time window.
      Enter your stops (including any optional via points) and the generator
      will lay out services in easy-to-read tables by direction. Data is
      provided via the Realtime Trains API.
    </p>

    <form id="form">
      <label>
        From (CRS):
        <input type="text" id="fromCrs" maxlength="3" required />
      </label>

      <!-- "Add Via" button lives between From and To; Via labels are inserted above it -->
      <button type="button" id="addViaBtn">Add Via</button>

      <label>
        To (CRS):
        <input type="text" id="toCrs" maxlength="3" required />
      </label>
      <label>
        Date:
        <input type="date" id="serviceDate" required />
      </label>
      <label>
        Start time:
        <input type="time" id="startTime" required />
      </label>
      <label>
        End time:
        <input type="time" id="endTime" required />
      </label>
      <button type="submit">Build timetable</button>
    </form>

    <div id="status"></div>

    <h2 id="headingAB"></h2>
    <table>
      <thead>
        <tr id="header-row-ab"></tr>
        <tr id="header-icons-row-ab"></tr>
      </thead>
      <tbody id="body-rows-ab"></tbody>
    </table>

    <h2 id="headingBA"></h2>
    <table>
      <thead>
        <tr id="header-row-ba"></tr>
        <tr id="header-icons-row-ba"></tr>
      </thead>
      <tbody id="body-rows-ba"></tbody>
    </table>

    <script src="/static/app.js"></script>
  </body>
</html>
